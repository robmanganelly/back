!function(){function t(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function n(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}(self.webpackChunkchat_app=self.webpackChunkchat_app||[]).push([[271],{4271:function(e,o,r){"use strict";r.r(o),r.d(o,{ProfileModule:function(){return z}});var a=r(9436),i=r(8583),s=r(9763),u=r(3679),l=r(7716),c=r(7001),d=r(6284),m=r(3738),p=r(171),f=r(1095),g=r(6627),Z=r(1436),h=r(8295),w=r(9983);function q(t,n){1&t&&(l.TgZ(0,"mat-icon",16),l._uU(1," edit"),l.qZA())}function A(t,n){1&t&&(l.TgZ(0,"mat-form-field",17),l.TgZ(1,"mat-label"),l._uU(2,"Username:"),l.qZA(),l._UZ(3,"input",18),l.TgZ(4,"mat-error"),l._uU(5," username should be only 5 to 25 alphanumeric characters "),l.qZA(),l.qZA())}function T(t,n){1&t&&(l.TgZ(0,"mat-icon",16),l._uU(1," edit"),l.qZA())}function v(t,n){if(1&t){var e=l.EpF();l.TgZ(0,"button",19),l.NdJ("click",function(){return l.CHM(e),l.oxw(),l.MAs(25).click()}),l._uU(1," Click Here to Add a New Image "),l.qZA()}}function b(t,n){1&t&&(l.TgZ(0,"mat-icon",16),l._uU(1," edit"),l.qZA())}function _(t,n){1&t&&(l.TgZ(0,"span"),l._uU(1,"Since it is a sensitive field, you need to type your current password to proceed changing email"),l.qZA())}function k(t,n){1&t&&(l.TgZ(0,"mat-form-field",17),l.TgZ(1,"mat-label"),l._uU(2,"Email:"),l.qZA(),l._UZ(3,"input",20),l.TgZ(4,"mat-error"),l._uU(5," please use a valid email "),l.qZA(),l.qZA())}function x(t,n){1&t&&(l.TgZ(0,"mat-hint",23),l._uU(1,"passwords does not match"),l.qZA())}function N(t,n){if(1&t&&(l.TgZ(0,"mat-form-field",17),l.TgZ(1,"mat-label"),l._uU(2,"Password:"),l.qZA(),l._UZ(3,"input",21),l.TgZ(4,"mat-error"),l._uU(5," wrong password, use at least 12 characters"),l.qZA(),l.YNc(6,x,2,0,"mat-hint",22),l.qZA()),2&t){var e=l.oxw();l.xp6(6),l.Q6J("ngIf",null==e.profileForm.errors?null:e.profileForm.errors.passwordDoesNotMatchError)}}function O(t,n){1&t&&(l.TgZ(0,"mat-icon",16),l._uU(1," edit"),l.qZA())}function I(t,n){1&t&&(l.TgZ(0,"mat-hint",23),l._uU(1,"passwords does not match"),l.qZA())}function U(t,n){if(1&t&&(l.TgZ(0,"mat-form-field",17),l.TgZ(1,"mat-label"),l._uU(2," Current Password:"),l.qZA(),l._UZ(3,"input",24),l.TgZ(4,"mat-error"),l._uU(5," wrong password, use at least 12 characters"),l.qZA(),l.YNc(6,I,2,0,"mat-hint",22),l.qZA()),2&t){var e=l.oxw();l.xp6(6),l.Q6J("ngIf",null==e.profileForm.errors?null:e.profileForm.errors.passwordDoesNotMatchError)}}function C(t,n){1&t&&(l.TgZ(0,"mat-hint",23),l._uU(1,"passwords does not match"),l.qZA())}function E(t,n){if(1&t&&(l.TgZ(0,"mat-form-field",17),l.TgZ(1,"mat-label"),l._uU(2,"Password:"),l.qZA(),l._UZ(3,"input",25),l.TgZ(4,"mat-error"),l._uU(5," wrong password, use at least 12 characters"),l.qZA(),l.YNc(6,C,2,0,"mat-hint",22),l.qZA()),2&t){var e=l.oxw();l.xp6(6),l.Q6J("ngIf",null==e.profileForm.errors?null:e.profileForm.errors.passwordDoesNotMatchError)}}function P(t,n){1&t&&(l.TgZ(0,"mat-hint",23),l._uU(1,"passwords does not match"),l.qZA())}function J(t,n){if(1&t&&(l.TgZ(0,"mat-form-field",17),l.TgZ(1,"mat-label"),l._uU(2,"Confirm Password:"),l.qZA(),l._UZ(3,"input",26),l.TgZ(4,"mat-error"),l._uU(5," wrong password, use at least 12 characters"),l.qZA(),l.YNc(6,P,2,0,"mat-hint",22),l.qZA()),2&t){var e=l.oxw();l.xp6(6),l.Q6J("ngIf",null==e.profileForm.errors?null:e.profileForm.errors.passwordDoesNotMatchError)}}function y(t,n){1&t&&(l.TgZ(0,"button",27),l._uU(1,"Discard all Changes"),l.qZA())}var F,Q=function(){var e=function(){function e(n,o,r,a,i){t(this,e),this.route=n,this.router=o,this.snack=r,this.asset=a,this.activatedRoute=i,this.user=void 0,this.profileForm=new u.cw({username:new u.NI(null,[u.kI.required,u.kI.pattern(/^\w{5,40}$/)]),photo:new u.NI(null,[u.kI.required]),email:new u.NI(null,[u.kI.required,u.kI.email]),password:new u.NI(null,[u.kI.required,u.kI.pattern(/^\S{12,}$/)]),passwordRepeat:new u.NI(null,[u.kI.required,u.kI.pattern(/^\S{12,}$/)]),currentPasswordForChangeEmail:new u.NI(null,[u.kI.required,u.kI.pattern(/^\S{12,}$/)]),currentPasswordForChangePassword:new u.NI(null,[u.kI.required,u.kI.pattern(/^\S{12,}$/)])}),this.usernameOnEdition=!1,this.imageOnEdition=!1,this.photoPreview="",this.emailOnEdition=!1,this.passwordOnEdition=!1}var o,r,a;return o=e,(r=[{key:"onPickedImage",value:function(t){var n,e=this,o=t.target.files[0];this.profileForm.patchValue({photo:o}),null===(n=this.profileForm.get("photo"))||void 0===n||n.updateValueAndValidity({});var r=new FileReader;r.onload=function(t){e.photoPreview=r.result},r.readAsDataURL(o)}},{key:"ngOnInit",value:function(){var t=this;this.activatedRoute.data.subscribe(function(n){t.user=n.loggedUser,t.photoPreview=t.asset.buildAsset(t.user.photo),t.profileForm.setValue({username:t.user.username,email:t.user.email,photo:t.asset.buildAsset(t.user.photo),password:null,passwordRepeat:null,currentPasswordForChangeEmail:null,currentPasswordForChangePassword:null})})}},{key:"onLeaveProfile",value:function(){var t=this;this.snack.open("Sure to Leave?\nAll unsaved changes will be lost.","Confirm",{duration:4e3,verticalPosition:"bottom"}).onAction().subscribe(function(){t.profileForm.reset(),t.router.navigate(["../home"],{relativeTo:t.route})})}},{key:"onSubmitProfile",value:function(){}}])&&n(o.prototype,r),a&&n(o,a),e}();return e.\u0275fac=function(t){return new(t||e)(l.Y36(s.gz),l.Y36(s.F0),l.Y36(c.ux),l.Y36(d.z),l.Y36(s.gz))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-profile"]],decls:57,vars:24,consts:[[1,"container"],[3,"formGroup","ngSubmit"],["mat-card-avatar","","alt","profile image avatar",3,"src"],["multi",""],["matTooltip","field on edition",4,"ngIf"],["appearance","standard",4,"ngIf"],["type","button","mat-stroked-button","",3,"click"],["mat-stroked-button","","type","button",3,"click",4,"ngIf"],["type","file",3,"change"],["filePickerRef",""],["alt","profile image","mat-card-lg-image","",1,"profile-preview",3,"src"],["mat-stroked-button","",3,"click"],[4,"ngIf"],[2,"width","max-content"],["type","reset","mat-stroked-button","",4,"ngIf"],["type","submit","mat-stroked-button","",3,"disabled"],["matTooltip","field on edition"],["appearance","standard"],["formControlName","username","matNativeControl","","required",""],["mat-stroked-button","","type","button",3,"click"],["formControlName","email","matNativeControl","","required",""],["matNativeControl","","required","","formControlName","currentPasswordForChangeEmail"],["class","mat-error",4,"ngIf"],[1,"mat-error"],["matNativeControl","","required","","formControlName","currentPasswordForChangePassword"],["matNativeControl","","required","","formControlName","password"],["matNativeControl","","required","","formControlName","passwordRepeat"],["type","reset","mat-stroked-button",""]],template:function(t,n){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"mat-card",1),l.NdJ("ngSubmit",function(){return n.onSubmitProfile()}),l.TgZ(2,"mat-card-header"),l._UZ(3,"img",2),l.TgZ(4,"mat-card-title"),l._uU(5),l.qZA(),l.qZA(),l.TgZ(6,"mat-card-content"),l.TgZ(7,"mat-accordion",3),l.TgZ(8,"mat-expansion-panel"),l.TgZ(9,"mat-expansion-panel-header"),l.YNc(10,q,2,0,"mat-icon",4),l.TgZ(11,"span"),l._uU(12),l.qZA(),l.qZA(),l.TgZ(13,"div"),l.YNc(14,A,6,0,"mat-form-field",5),l.TgZ(15,"button",6),l.NdJ("click",function(){return n.usernameOnEdition=!n.usernameOnEdition}),l._uU(16),l.qZA(),l.qZA(),l.qZA(),l.TgZ(17,"mat-expansion-panel"),l.TgZ(18,"mat-expansion-panel-header"),l.YNc(19,T,2,0,"mat-icon",4),l.TgZ(20,"span"),l._uU(21,"Image:"),l.qZA(),l.qZA(),l.TgZ(22,"div"),l.YNc(23,v,2,0,"button",7),l.TgZ(24,"input",8,9),l.NdJ("change",function(t){return n.onPickedImage(t)}),l.qZA(),l._UZ(26,"img",10),l.TgZ(27,"button",11),l.NdJ("click",function(){return n.imageOnEdition=!n.imageOnEdition}),l._uU(28),l.qZA(),l.qZA(),l.qZA(),l.TgZ(29,"mat-expansion-panel"),l.TgZ(30,"mat-expansion-panel-header"),l.YNc(31,b,2,0,"mat-icon",4),l.TgZ(32,"span"),l._uU(33),l.qZA(),l.qZA(),l.TgZ(34,"div"),l.YNc(35,_,2,0,"span",12),l.YNc(36,k,6,0,"mat-form-field",5),l.YNc(37,N,7,1,"mat-form-field",5),l.TgZ(38,"button",11),l.NdJ("click",function(){return n.emailOnEdition=!n.emailOnEdition}),l._uU(39),l.qZA(),l.qZA(),l.qZA(),l.TgZ(40,"mat-expansion-panel"),l.TgZ(41,"mat-expansion-panel-header"),l.YNc(42,O,2,0,"mat-icon",4),l.TgZ(43,"span"),l._uU(44," ****************** "),l.qZA(),l.qZA(),l.TgZ(45,"div"),l.YNc(46,U,7,1,"mat-form-field",5),l.YNc(47,E,7,1,"mat-form-field",5),l.YNc(48,J,7,1,"mat-form-field",5),l.TgZ(49,"button",11),l.NdJ("click",function(){return n.passwordOnEdition=!n.passwordOnEdition}),l._uU(50),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(51,"mat-card-actions",13),l.YNc(52,y,2,0,"button",14),l.TgZ(53,"button",15),l._uU(54,"Update Profile"),l.qZA(),l.TgZ(55,"button",6),l.NdJ("click",function(){return n.onLeaveProfile()}),l._uU(56,"Go Back"),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(1),l.Q6J("formGroup",n.profileForm),l.xp6(2),l.Q6J("src",null==n.user?null:n.user.photo,l.LSH),l.xp6(2),l.Oqu(null==n.user?null:n.user.username),l.xp6(5),l.Q6J("ngIf",n.usernameOnEdition),l.xp6(2),l.Oqu(n.profileForm.value.username),l.xp6(2),l.Q6J("ngIf",n.usernameOnEdition),l.xp6(2),l.Oqu(n.usernameOnEdition?"Cancel":"Edit"),l.xp6(3),l.Q6J("ngIf",n.imageOnEdition),l.xp6(4),l.Q6J("ngIf",n.imageOnEdition),l.xp6(3),l.Q6J("src",n.photoPreview,l.LSH),l.xp6(2),l.Oqu(n.imageOnEdition?"Cancel":"Edit"),l.xp6(3),l.Q6J("ngIf",n.emailOnEdition),l.xp6(2),l.Oqu(n.profileForm.value.email),l.xp6(2),l.Q6J("ngIf",n.emailOnEdition),l.xp6(1),l.Q6J("ngIf",n.emailOnEdition),l.xp6(1),l.Q6J("ngIf",n.emailOnEdition),l.xp6(2),l.Oqu(n.emailOnEdition?"Cancel":"Edit"),l.xp6(3),l.Q6J("ngIf",n.passwordOnEdition),l.xp6(4),l.Q6J("ngIf",n.passwordOnEdition),l.xp6(1),l.Q6J("ngIf",n.passwordOnEdition),l.xp6(1),l.Q6J("ngIf",n.passwordOnEdition),l.xp6(2),l.Oqu(n.passwordOnEdition?"Cancel":"Edit"),l.xp6(2),l.Q6J("ngIf",n.profileForm.touched),l.xp6(1),l.Q6J("disabled",!n.profileForm.valid))},directives:[m.a8,u.JL,u.sg,m.dk,m.kc,m.n5,m.dn,p.pp,p.ib,p.yz,i.O5,f.lW,m.WU,m.hq,g.Hw,Z.gM,h.KE,h.hX,u.Fj,w.Nt,u.JJ,u.u,u.Q7,h.TO,h.bx],styles:[".container[_ngcontent-%COMP%]{margin:10px auto auto;width:-webkit-min-content;width:min-content}input[type=file][_ngcontent-%COMP%]{visibility:hidden}.profile-preview[_ngcontent-%COMP%]{display:block;width:auto}div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block}mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-flex}mat-card-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;border-radius:20px}mat-expansion-panel-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:10px}"]}),e}(),Y=r(6201),M=r(6634),S=[{path:"",component:Q,resolve:{loggedUser:Y.T,currentActiveRoom:M.e}}],R=function(){var n=function n(){t(this,n)};return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[i.ez,s.Bz.forChild(S)],s.Bz]}),n}(),z=((F=function n(){t(this,n)}).\u0275fac=function(t){return new(t||F)},F.\u0275mod=l.oAB({type:F}),F.\u0275inj=l.cJS({imports:[[a.m,R]]}),F)}}])}();