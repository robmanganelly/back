(self.webpackChunkchat_app=self.webpackChunkchat_app||[]).push([[266],{3446:function(t,e,o){"use strict";o.r(e),o.d(e,{HomeModule:function(){return rt}});var i=o(9436),n=o(8583),s=o(9763),a=o(5072),c=o(5319),r=o(8002),l=o(9643),u=o(3342),m=o(7716),d=o(6673),g=o(6284),h=o(3017),p=o(4872),b=o(7556),v=o(2325),Z=o(2522),f=o(3738),A=o(1095),w=o(1436),T=o(6627),S=o(7701);function _(t,e){if(1&t&&(m.TgZ(0,"button",3),m.NdJ("click",function(){return e.$implicit.action()}),m.TgZ(1,"mat-icon"),m._uU(2),m.qZA(),m.qZA()),2&t){const t=e.$implicit;m.Q6J("matTooltip",t.tooltip),m.xp6(2),m.Oqu(t.icon)}}function C(t,e){if(1&t&&(m.TgZ(0,"button",3),m.NdJ("click",function(){return e.$implicit.action()}),m.TgZ(1,"mat-icon"),m._uU(2),m.qZA(),m.qZA()),2&t){const t=e.$implicit;m.Q6J("matTooltip",t.tooltip),m.xp6(2),m.Oqu(t.icon)}}function R(t,e){if(1&t&&(m.TgZ(0,"mat-toolbar-row"),m.YNc(1,C,3,2,"button",1),m.qZA()),2&t){const t=m.oxw();m.xp6(1),m.Q6J("ngForOf",t.moreButtons)}}let x=(()=>{class t{constructor(t,e,o,i,n,s){this.coreService=t,this.asset=e,this.authService=o,this.snack=i,this.route=n,this.router=s,this.user=new p.L("","",new Date,"","","",[]),this.hideOptions=!0,this.AllCardsSelected=!1,this.mainButtons=[{icon:"manage_accounts",tooltip:"show account options",action:this.viewProfile.bind(this)},{icon:"more_vert",tooltip:"display a menu with options for managing chats",action:this.viewOptions.bind(this)},{icon:"logout",tooltip:"Exit the App",action:this.logout.bind(this)}],this.moreButtons=[{icon:"done_outlined",tooltip:"Select Chats for Deletion",action:this.activateSelectFlag.bind(this)},{icon:"add_circle_outlined",tooltip:"create new Chat",action:this.createRoom.bind(this)},{icon:"delete_outlined",tooltip:"Delete all Selected Chats",action:this.deleteFlagged.bind(this)},{icon:"search",tooltip:"not implemented yet",action:this.createRoom.bind(this)},{icon:"contacts",tooltip:"view and edit all contacts",action:this.displayContacts.bind(this)}]}viewOptions(){this.hideOptions=!this.hideOptions}activateSelectFlag(){this.AllCardsSelected=!this.AllCardsSelected,this.moreButtons[0].icon=this.AllCardsSelected?"done_outlined":"select_all"}deleteFlagged(){}viewProfile(){this.router.navigate(["../profile"],{relativeTo:this.route})}createRoom(){this.router.navigate(["../contacts"],{relativeTo:this.route,state:{createRoom:!0}})}displayContacts(){this.router.navigate(["../contacts"],{relativeTo:this.route})}logout(){this.snack.execute("Sure to close your session?","Confirm",{duration:2e3},()=>this.authService.logOutRoutine())}ngOnInit(){this.route.data.pipe((0,u.b)(()=>console.log("\n\n\n\xbatapping data side\n\n\n\n\xba")),(0,u.b)(console.log)).subscribe(t=>{this.user=t.loggedUser,this.user&&(this.user.photo=this.asset.buildAsset(this.user.photo))})}ngOnDestroy(){}}return t.\u0275fac=function(e){return new(e||t)(m.Y36(d.p),m.Y36(g.z),m.Y36(b.e),m.Y36(v.f),m.Y36(s.gz),m.Y36(s.F0))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-side-toolbar"]],decls:8,vars:8,consts:[["mat-card-avatar","","alt","user profile avatar image",3,"src"],["mat-icon-button","",3,"matTooltip","click",4,"ngFor","ngForOf"],[4,"ngIf"],["mat-icon-button","",3,"matTooltip","click"]],template:function(t,e){1&t&&(m.TgZ(0,"mat-toolbar"),m.TgZ(1,"mat-toolbar-row"),m._UZ(2,"img",0),m._uU(3),m.ALo(4,"titlecase"),m.ALo(5,"truncate"),m.YNc(6,_,3,2,"button",1),m.qZA(),m.YNc(7,R,2,1,"mat-toolbar-row",2),m.qZA()),2&t&&(m.xp6(2),m.Q6J("src",e.user.photo,m.LSH),m.xp6(1),m.hij(" ",m.lcZ(4,4,m.lcZ(5,6,e.user.username))," "),m.xp6(3),m.Q6J("ngForOf",e.mainButtons),m.xp6(1),m.Q6J("ngIf",!e.hideOptions))},directives:[Z.Ye,Z.rD,f.kc,n.sg,n.O5,A.lW,w.gM,T.Hw],pipes:[n.rS,S.W],styles:["mat-toolbar[_ngcontent-%COMP%]{width:300px;background:inherit}mat-toolbar[_ngcontent-%COMP%]   mat-toolbar-row[_ngcontent-%COMP%]{justify-content:space-between}"]}),t})();var q=o(7746),O=o(346),y=o(5384);function M(t,e){if(1&t&&(m.TgZ(0,"mat-icon",6),m._uU(1,"more_vert"),m.qZA()),2&t){m.oxw();const t=m.MAs(9);m.Q6J("matTooltip","show options for this chat")("matMenuTriggerFor",t)}}function U(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"mat-card"),m.TgZ(1,"mat-card-header"),m.TgZ(2,"img",1),m.NdJ("click",function(){const e=m.CHM(t).index;return m.oxw().onClickCardNameAndAvatar(e)}),m.qZA(),m.TgZ(3,"mat-card-title",2),m.NdJ("click",function(){const e=m.CHM(t).index;return m.oxw().onClickCardNameAndAvatar(e)}),m._uU(4),m.ALo(5,"truncate"),m.ALo(6,"titlecase"),m.qZA(),m.YNc(7,M,2,2,"mat-icon",3),m.TgZ(8,"mat-menu",null,4),m.TgZ(10,"button",5),m.NdJ("click",function(){const e=m.CHM(t).$implicit;return m.oxw().onDeleteRoom(e)}),m.TgZ(11,"mat-icon"),m._uU(12,"delete"),m.qZA(),m.TgZ(13,"span"),m._uU(14,"Delete"),m.qZA(),m.qZA(),m.TgZ(15,"button",5),m.NdJ("click",function(){const e=m.CHM(t).$implicit;return m.oxw().onEditRoom(e)}),m.TgZ(16,"mat-icon"),m._uU(17,"edit"),m.qZA(),m.TgZ(18,"span"),m._uU(19,"Edit"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()}if(2&t){const t=e.$implicit,o=e.index;m.xp6(2),m.Q6J("matTooltip","click here to load chat")("src",t.roomPhoto,m.LSH),m.xp6(1),m.Q6J("matBadge",t.pending)("matBadgeHidden",!t.pending)("matTooltip","click here to load chat"),m.xp6(1),m.hij(" ",m.xi3(5,7,m.lcZ(6,10,t.roomName),17)," "),m.xp6(3),m.Q6J("ngIf",o>0)}}let k=(()=>{class t{constructor(t,e,o){this.asset=t,this.coreService=e,this.activatedRoute=o,this.loadedRooms=[],this.roomSub=new c.w,this.activeRoomSub=new c.w}ngOnInit(){this.activatedRoute.data.subscribe(t=>{this.onReceiveRoomData(t.loadedRooms)}),this.coreService.loadedRoomsBehaviorSubject.pipe().subscribe(this.onReceiveRoomData.bind(this)),this.coreService.messageListStateSnapshotSubject.pipe().subscribe(t=>this.coreService.updateBadges(t,this.loadedRooms))}ngOnDestroy(){this.roomSub&&this.roomSub.unsubscribe(),this.activeRoomSub&&this.activeRoomSub.unsubscribe()}onClickCardNameAndAvatar(t){this.coreService.pickRoom(t).subscribe(t=>{this.coreService.emitJoinRoomEvent(t._id)})}onDeleteRoom(t){alert("implement Delete Room")}onEditRoom(t){alert("implement Edit Room")}onReceiveRoomData(t){this.loadedRooms=t,this.loadedRooms.forEach(t=>t.roomPhoto=this.asset.buildAsset(t.roomPhoto))}}return t.\u0275fac=function(e){return new(e||t)(m.Y36(g.z),m.Y36(d.p),m.Y36(s.gz))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-room-tile"]],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],["alt","profile image","mat-card-avatar","",3,"matTooltip","src","click"],["matBadgeSize","small","matBadgeOverlap","false","matBadgePosition","above after","matBadgeColor","primary",3,"matBadge","matBadgeHidden","matTooltip","click"],["aria-label","show options for this chat",3,"matTooltip","matMenuTriggerFor",4,"ngIf"],["menu","matMenu"],["mat-menu-item","",3,"click"],["aria-label","show options for this chat",3,"matTooltip","matMenuTriggerFor"]],template:function(t,e){1&t&&(m.TgZ(0,"div"),m.YNc(1,U,20,12,"mat-card",0),m.qZA()),2&t&&(m.xp6(1),m.Q6J("ngForOf",e.loadedRooms))},directives:[n.sg,f.a8,f.dk,f.kc,w.gM,f.n5,O.k,n.O5,y.VK,y.OP,T.Hw,y.p6],pipes:[S.W,n.rS],styles:["mat-icon[_ngcontent-%COMP%]{margin-left:auto}.mat-card-avatar[_ngcontent-%COMP%], mat-card-title[_ngcontent-%COMP%], mat-icon[_ngcontent-%COMP%]{cursor:pointer}"]}),t})();var Y=o(1209),J=o(2684),I=o(9983);function P(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"mat-toolbar",1),m._UZ(1,"textarea",2,3),m._uU(3," | "),m.TgZ(4,"button",4),m.NdJ("click",function(){m.CHM(t);const e=m.MAs(2);return m.oxw().postMessage(e)}),m.TgZ(5,"mat-icon"),m._uU(6,"send"),m.qZA(),m.qZA(),m.qZA()}if(2&t){const t=m.MAs(2);m.xp6(1),m.Q6J("mat-autosize",!0)("matTextareaAutosize",!0)("matAutosizeMinRows",2)("matAutosizeMaxRows",3),m.xp6(3),m.Q6J("disabled",""===t.value)}}let N=(()=>{class t{constructor(t,e,o,i){this.activatedRoute=t,this.authService=e,this.msgService=o,this.coreService=i,this.activeRoomSub=new c.w,this.activeRoom="",this.displayBar=!0,this.loggedUserId=!0}ngOnInit(){this.activatedRoute.data.subscribe(t=>{this.loggedUserId=t.loggedUser._id,this.displayBar=!!t.currentActiveRoom,this.activeRoom=this.displayBar?t.currentActiveRoom.id:null}),this.activeRoomSub=this.coreService.catchActiveRoom().subscribe(t=>{t&&(this.displayBar=!0,this.activeRoom=t._id)})}postMessage(t){let e=new Y.e(t.value,this.activeRoom,this.loggedUserId,0);t.value="",t.focus(),this.coreService.emitMessageEvent(e)}ngOnChanges(){this.activeRoomSub.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(m.Y36(s.gz),m.Y36(b.e),m.Y36(J.e),m.Y36(d.p))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-bottom-toolbar"]],features:[m.TTD],decls:1,vars:1,consts:[["class","bottom-toolbar","color","primary",4,"ngIf"],["color","primary",1,"bottom-toolbar"],["placeholder","Text here...",2,"width","85%",3,"mat-autosize","matTextareaAutosize","matAutosizeMinRows","matAutosizeMaxRows"],["msgContentRef",""],["mat-icon-button","",3,"disabled","click"]],template:function(t,e){1&t&&m.YNc(0,P,7,5,"mat-toolbar",0),2&t&&m.Q6J("ngIf",e.displayBar)},directives:[n.O5,Z.Ye,I.D7,A.lW,T.Hw],styles:[".bottom-toolbar[_ngcontent-%COMP%]{position:sticky;bottom:0}textarea[_ngcontent-%COMP%]{outline-color:transparent}mat-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:auto}"]}),t})();var Q=o(5435);let B=(()=>{class t{transform(t,...e){return t.toLocaleString().replace("T","  ").split(":").slice(0,2).join(":")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=m.Yjl({name:"datetime",type:t,pure:!0}),t})();function F(t,e){if(1&t&&(m.TgZ(0,"span"),m.TgZ(1,"mat-icon",4),m._uU(2),m.qZA(),m.qZA()),2&t){const t=m.oxw();m.xp6(1),m.Q6J("inline",!0),m.xp6(1),m.Oqu(0===t.data.state?"query_builder":1===t.data.state?"done":"done_all")}}let z=(()=>{class t{constructor(){this.data=new Y.e("","","",0)}ngOnInit(){}ngOnDestroy(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-msg-bubble"]],inputs:{data:"data"},decls:10,vars:5,consts:[[1,"width-align-bubble"],[1,"msg-content"],[1,"msg-footer"],[4,"ngIf"],[3,"inline"]],template:function(t,e){1&t&&(m.TgZ(0,"div",0),m.TgZ(1,"mat-card"),m.TgZ(2,"mat-card-content"),m.TgZ(3,"p",1),m._uU(4),m.qZA(),m.qZA(),m.TgZ(5,"mat-card-footer"),m.TgZ(6,"p",2),m._uU(7),m.ALo(8,"datetime"),m.YNc(9,F,3,2,"span",3),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&t&&(m.xp6(4),m.Oqu(e.data.text),m.xp6(3),m.hij("sent at: ",m.lcZ(8,3,e.data.sent)," "),m.xp6(2),m.Q6J("ngIf",e.data.owner))},directives:[f.a8,f.dn,f.rt,n.O5,T.Hw],pipes:[B],styles:[".width-align-bubble[_ngcontent-%COMP%]{padding:4px}.msg-footer[_ngcontent-%COMP%]{padding-right:10px;max-width:35%;text-align:right;margin-left:auto;margin-bottom:1px;font-size:xx-small}.msg-content[_ngcontent-%COMP%]{font-size:small;word-wrap:break-word}"]}),t})();var H=o(4885);const L=["msgTemplateRef"],D=function(t,e){return{"msg-left-container":t,"msg-right-container":e}};function E(t,e){if(1&t&&(m.TgZ(0,"div",4,5),m._UZ(2,"app-msg-bubble",6),m.qZA()),2&t){const t=e.$implicit,o=m.oxw(2);m.Q6J("ngClass",m.WLB(2,D,!o.setAlign(t.owner),o.setAlign(t.owner))),m.xp6(2),m.Q6J("data",t)}}function j(t,e){if(1&t&&(m.TgZ(0,"div"),m.YNc(1,E,3,5,"div",3),m.qZA()),2&t){const t=m.oxw();m.xp6(1),m.Q6J("ngForOf",t.currentConversationMessages)}}function $(t,e){1&t&&(m.TgZ(0,"div"),m.TgZ(1,"div",7),m.TgZ(2,"p"),m._uU(3," This Chat is empty... "),m.qZA(),m.qZA(),m.qZA())}function W(t,e){1&t&&(m.TgZ(0,"div",8),m._UZ(1,"mat-spinner",9),m.qZA())}let X=(()=>{class t{constructor(t,e){this.activatedRoute=t,this.coreService=e,this.messageInstances=void 0,this.currentConversationMessages=[],this.currentActiveRoom=void 0,this.listState=0,this.loggedUserId=void 0,this.sendSub=new c.w,this.msgSub=new c.w,this.scrollSub=new c.w,this.activeRoomSub=new c.w,this.listStateSub=new c.w}setAlign(t){return"boolean"==typeof t?t:this.loggedUserId===t}ngOnInit(){this.activatedRoute.data.subscribe(t=>{this.loggedUserId=t.loggedUser._id,this.listState=t.loadedRooms&&t.loadedRooms.length>0?2:1}),this.activeRoomSub=this.coreService.activeRoomBehaviorSubject.pipe((0,u.b)(t=>{this.listState=0,console.log("\n\n\nset list to zero\n\n\n"),this.currentActiveRoom=t})).subscribe(t=>{this.currentConversationMessages=this.coreService.readRoomMessages(null==t?void 0:t._id),this.currentConversationMessages.forEach(t=>t.register(t._id)),this.listState=2,console.log("\n\n\nset list to two\n\n\n")},console.log),this.sendSub=this.coreService.messageSubject.pipe((0,Q.h)(t=>{var e;return t.room===(null===(e=this.currentActiveRoom)||void 0===e?void 0:e._id)})).subscribe(t=>{this.currentConversationMessages.push(t)})}ngAfterViewInit(){var t;this.scrollSub=null===(t=this.messageInstances)||void 0===t?void 0:t.changes.subscribe(()=>{this.messageInstances&&this.messageInstances.last&&this.messageInstances.last.nativeElement.scrollIntoView({behavior:"smooth",block:"end"})})}ngOnDestroy(){this.listStateSub.unsubscribe(),this.sendSub.unsubscribe(),this.msgSub.unsubscribe(),this.scrollSub.unsubscribe(),this.activeRoomSub&&this.activeRoomSub.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(m.Y36(s.gz),m.Y36(d.p))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-msg-list"]],viewQuery:function(t,e){if(1&t&&m.Gf(L,5),2&t){let t;m.iGM(t=m.CRH())&&(e.messageInstances=t)}},decls:4,vars:4,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],["id","spinner",4,"ngSwitchCase"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["msgTemplateRef",""],[3,"data"],[2,"height","100%"],["id","spinner"],["color","primary"]],template:function(t,e){1&t&&(m.TgZ(0,"div",0),m.YNc(1,j,2,1,"div",1),m.YNc(2,$,4,0,"div",1),m.YNc(3,W,2,0,"div",2),m.qZA()),2&t&&(m.Q6J("ngSwitch",e.listState),m.xp6(1),m.Q6J("ngSwitchCase",2),m.xp6(1),m.Q6J("ngSwitchCase",1),m.xp6(1),m.Q6J("ngSwitchCase",0))},directives:[n.RF,n.n9,n.sg,n.mk,z,H.$g],styles:[".msg-left-container[_ngcontent-%COMP%]{margin-right:auto;margin-bottom:4px;width:60%}.msg-right-container[_ngcontent-%COMP%]{margin-left:auto;margin-bottom:4px;width:60%}div[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{padding-bottom:70px}#spinner[_ngcontent-%COMP%]{height:200px;display:flex;align-items:center;justify-content:center}"]}),t})();function V(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"button",9),m.NdJ("click",function(){return m.CHM(t),m.oxw(),m.MAs(2).toggle()}),m.TgZ(1,"mat-icon",10),m._uU(2,"menu"),m.qZA(),m.qZA()}}function G(t,e){1&t&&(m.TgZ(0,"span"),m._uU(1,"MEAN Chat"),m.qZA())}function K(t,e){if(1&t&&(m.TgZ(0,"span"),m._UZ(1,"img",11),m.TgZ(2,"span",12),m._uU(3),m.ALo(4,"titlecase"),m.ALo(5,"truncate"),m.qZA(),m.qZA()),2&t){const t=m.oxw();m.xp6(1),m.Q6J("src",t.chatPhoto,m.LSH),m.xp6(2),m.hij(" ",m.lcZ(4,2,m.xi3(5,4,t.selectedChat,25)),"")}}function tt(t,e){1&t&&m._UZ(0,"app-msg-list")}function et(t,e){if(1&t){const t=m.EpF();m.TgZ(0,"mat-card",13),m.TgZ(1,"mat-card-header"),m.TgZ(2,"mat-card-title"),m._uU(3),m.ALo(4,"titlecase"),m.qZA(),m.qZA(),m.TgZ(5,"mat-card-content"),m.TgZ(6,"p"),m._uU(7,"Before start chatting you must add some contacts to talk with."),m.qZA(),m.TgZ(8,"span"),m._uU(9,"you can start clicking here "),m.qZA(),m.TgZ(10,"span"),m.TgZ(11,"button",14),m.NdJ("click",function(){return m.CHM(t),m.oxw().addFirstContact()}),m.TgZ(12,"mat-icon"),m._uU(13,"contacts"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(14,"p"),m._uU(15,"And:"),m.qZA(),m.TgZ(16,"span"),m._uU(17,"When you finish, you can click the option chat: "),m.qZA(),m.TgZ(18,"span"),m.TgZ(19,"mat-icon"),m._uU(20,"chat"),m.qZA(),m.qZA(),m.TgZ(21,"span"),m._uU(22," and that's all"),m.qZA(),m.TgZ(23,"p"),m._uU(24,"You can also create groups by clicking the options"),m.qZA(),m.TgZ(25,"span"),m.TgZ(26,"mat-icon"),m._uU(27,"more_vert"),m.qZA(),m.qZA(),m.TgZ(28,"span"),m._uU(29,"and click the option"),m.qZA(),m.TgZ(30,"span"),m.TgZ(31,"mat-icon"),m._uU(32,"add_circle_outline"),m.qZA(),m.qZA(),m.qZA(),m.qZA()}if(2&t){const t=m.oxw();m.xp6(3),m.hij(" Hi ",m.lcZ(4,1,null==t.currentUser?null:t.currentUser.username)," ")}}let ot=(()=>{class t{constructor(t,e,o,i,n){this.coreService=t,this.router=e,this.asset=o,this.activatedRoute=i,this.breakpointObserver=n,this.activeRoom=void 0,this.activeRoomSub=new c.w,this.currentUser=void 0,this.selectedChat="",this.chatPhoto="",this.emptyChat=!0,this.isHandset$=this.breakpointObserver.observe(a.u3.Handset).pipe((0,r.U)(t=>t.matches),(0,l.d)())}ngOnInit(){this.activatedRoute.data.pipe((0,u.b)(console.log)).subscribe(t=>{this.emptyChat=!(t.loadedRooms&&t.loadedRooms.length>0),this.currentUser=t.loggedUser,this.activeRoom=t.currentActiveRoom?t.currentActiveRoom:null,this.updateUiOnActiveRoomChange(this.activeRoom)},t=>{console.log(t)},()=>{console.log("\n\ncomplete subscription on home\n\n")}),this.activeRoomSub=this.coreService.catchActiveRoom().pipe().subscribe(t=>{t&&(this.activeRoom=t),this.updateUiOnActiveRoomChange(t)})}ngOnDestroy(){this.activeRoomSub.unsubscribe()}updateUiOnActiveRoomChange(t){t?(this.emptyChat=!1,this.selectedChat=null==t?void 0:t.roomName,this.chatPhoto=this.asset.buildAsset(null==t?void 0:t.roomPhoto)):this.emptyChat=!0}addFirstContact(){return this.router.navigate(["session",this.currentUser._id,"contacts"])}}return t.\u0275fac=function(e){return new(e||t)(m.Y36(d.p),m.Y36(s.F0),m.Y36(g.z),m.Y36(s.gz),m.Y36(a.Yg))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-home"]],decls:21,vars:16,consts:[[1,"sidenav-container"],["fixedInViewport","",1,"sidenav",3,"mode","opened"],["drawer",""],["color","primary",1,"mat-top-toolbar"],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click",4,"ngIf"],[4,"ngIf"],[1,"msg-list"],[4,"ngIf","ngIfElse"],["emptyChatCard",""],["type","button","aria-label","Toggle sidenav","mat-icon-button","",3,"click"],["aria-label","Side nav toggle icon"],["mat-card-avatar","",3,"src"],[2,"margin-left","5px"],[2,"width","50%","margin","80px auto"],["mat-icon-button","",3,"click"]],template:function(t,e){if(1&t&&(m.TgZ(0,"mat-sidenav-container",0),m.TgZ(1,"mat-sidenav",1,2),m.ALo(3,"async"),m.ALo(4,"async"),m.ALo(5,"async"),m._UZ(6,"app-side-toolbar"),m.TgZ(7,"mat-nav-list"),m._UZ(8,"app-room-tile"),m.qZA(),m.qZA(),m.TgZ(9,"mat-sidenav-content"),m.TgZ(10,"mat-toolbar",3),m.TgZ(11,"mat-toolbar-row"),m.YNc(12,V,3,0,"button",4),m.ALo(13,"async"),m.YNc(14,G,2,0,"span",5),m.YNc(15,K,6,7,"span",5),m.qZA(),m.qZA(),m.TgZ(16,"div",6),m.YNc(17,tt,1,0,"app-msg-list",7),m.qZA(),m._UZ(18,"app-bottom-toolbar"),m.qZA(),m.qZA(),m.YNc(19,et,33,3,"ng-template",null,8,m.W1O)),2&t){const t=m.MAs(20);m.xp6(1),m.Q6J("mode",m.lcZ(4,10,e.isHandset$)?"over":"side")("opened",!1===m.lcZ(5,12,e.isHandset$)),m.uIk("role",m.lcZ(3,8,e.isHandset$)?"dialog":"navigation"),m.xp6(11),m.Q6J("ngIf",m.lcZ(13,14,e.isHandset$)),m.xp6(2),m.Q6J("ngIf",e.emptyChat),m.xp6(1),m.Q6J("ngIf",!e.emptyChat),m.xp6(2),m.Q6J("ngIf",!e.emptyChat)("ngIfElse",t)}},directives:[h.TM,h.JX,x,q.Hk,k,h.Rh,Z.Ye,Z.rD,n.O5,N,A.lW,T.Hw,f.kc,X,f.a8,f.dk,f.n5,f.dn],pipes:[n.Ov,n.rS,S.W],styles:[".sidenav-container[_ngcontent-%COMP%]{height:100%}.sidenav[_ngcontent-%COMP%]{width:300px}.sidenav[_ngcontent-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{background:inherit}.mat-toolbar.mat-primary[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1}.bottom-toolbar[_ngcontent-%COMP%]{width:100%;position:sticky;bottom:0;z-index:1}.msg-list[_ngcontent-%COMP%]{min-height:800px}.mat-top-toolbar[_ngcontent-%COMP%]{z-index:1;position:sticky;top:0}"]}),t})();var it=o(6201),nt=o(6634),st=o(5257);const at=[{path:"",component:ot,resolve:{loadedRooms:(()=>{class t{constructor(t){this.coreService=t}resolve(t,e){return this.coreService.loadedRoomsBehaviorSubject.pipe((0,st.q)(1),(0,u.b)(t=>{0===t.length&&this.coreService.loadRoomsFromUser()}))}}return t.\u0275fac=function(e){return new(e||t)(m.LFG(d.p))},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),loggedUser:it.T,currentActiveRoom:nt.e}}];let ct=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({imports:[[n.ez,s.Bz.forChild(at)],s.Bz]}),t})(),rt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({imports:[[i.m,ct]]}),t})()}}]);