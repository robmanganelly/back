(self.webpackChunkchat_app=self.webpackChunkchat_app||[]).push([[271],{4271:function(t,e,n){"use strict";n.r(e),n.d(e,{ProfileModule:function(){return M}});var o=n(9436),r=n(8583),a=n(9763),i=n(3679),s=n(7716),u=n(7001),l=n(6284),d=n(3738),c=n(171),m=n(1095),p=n(6627),g=n(1436),f=n(8295),Z=n(9983);function h(t,e){1&t&&(s.TgZ(0,"mat-icon",16),s._uU(1," edit"),s.qZA())}function q(t,e){1&t&&(s.TgZ(0,"mat-form-field",17),s.TgZ(1,"mat-label"),s._uU(2,"Username:"),s.qZA(),s._UZ(3,"input",18),s.TgZ(4,"mat-error"),s._uU(5," username should be only 5 to 25 alphanumeric characters "),s.qZA(),s.qZA())}function w(t,e){1&t&&(s.TgZ(0,"mat-icon",16),s._uU(1," edit"),s.qZA())}function A(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"button",19),s.NdJ("click",function(){return s.CHM(t),s.oxw(),s.MAs(25).click()}),s._uU(1," Click Here to Add a New Image "),s.qZA()}}function T(t,e){1&t&&(s.TgZ(0,"mat-icon",16),s._uU(1," edit"),s.qZA())}function _(t,e){1&t&&(s.TgZ(0,"span"),s._uU(1,"Since it is a sensitive field, you need to type your current password to proceed changing email"),s.qZA())}function b(t,e){1&t&&(s.TgZ(0,"mat-form-field",17),s.TgZ(1,"mat-label"),s._uU(2,"Email:"),s.qZA(),s._UZ(3,"input",20),s.TgZ(4,"mat-error"),s._uU(5," please use a valid email "),s.qZA(),s.qZA())}function x(t,e){1&t&&(s.TgZ(0,"mat-hint",23),s._uU(1,"passwords does not match"),s.qZA())}function N(t,e){if(1&t&&(s.TgZ(0,"mat-form-field",17),s.TgZ(1,"mat-label"),s._uU(2,"Password:"),s.qZA(),s._UZ(3,"input",21),s.TgZ(4,"mat-error"),s._uU(5," wrong password, use at least 12 characters"),s.qZA(),s.YNc(6,x,2,0,"mat-hint",22),s.qZA()),2&t){const t=s.oxw();s.xp6(6),s.Q6J("ngIf",null==t.profileForm.errors?null:t.profileForm.errors.passwordDoesNotMatchError)}}function O(t,e){1&t&&(s.TgZ(0,"mat-icon",16),s._uU(1," edit"),s.qZA())}function I(t,e){1&t&&(s.TgZ(0,"mat-hint",23),s._uU(1,"passwords does not match"),s.qZA())}function U(t,e){if(1&t&&(s.TgZ(0,"mat-form-field",17),s.TgZ(1,"mat-label"),s._uU(2," Current Password:"),s.qZA(),s._UZ(3,"input",24),s.TgZ(4,"mat-error"),s._uU(5," wrong password, use at least 12 characters"),s.qZA(),s.YNc(6,I,2,0,"mat-hint",22),s.qZA()),2&t){const t=s.oxw();s.xp6(6),s.Q6J("ngIf",null==t.profileForm.errors?null:t.profileForm.errors.passwordDoesNotMatchError)}}function k(t,e){1&t&&(s.TgZ(0,"mat-hint",23),s._uU(1,"passwords does not match"),s.qZA())}function v(t,e){if(1&t&&(s.TgZ(0,"mat-form-field",17),s.TgZ(1,"mat-label"),s._uU(2,"Password:"),s.qZA(),s._UZ(3,"input",25),s.TgZ(4,"mat-error"),s._uU(5," wrong password, use at least 12 characters"),s.qZA(),s.YNc(6,k,2,0,"mat-hint",22),s.qZA()),2&t){const t=s.oxw();s.xp6(6),s.Q6J("ngIf",null==t.profileForm.errors?null:t.profileForm.errors.passwordDoesNotMatchError)}}function C(t,e){1&t&&(s.TgZ(0,"mat-hint",23),s._uU(1,"passwords does not match"),s.qZA())}function E(t,e){if(1&t&&(s.TgZ(0,"mat-form-field",17),s.TgZ(1,"mat-label"),s._uU(2,"Confirm Password:"),s.qZA(),s._UZ(3,"input",26),s.TgZ(4,"mat-error"),s._uU(5," wrong password, use at least 12 characters"),s.qZA(),s.YNc(6,C,2,0,"mat-hint",22),s.qZA()),2&t){const t=s.oxw();s.xp6(6),s.Q6J("ngIf",null==t.profileForm.errors?null:t.profileForm.errors.passwordDoesNotMatchError)}}function P(t,e){1&t&&(s.TgZ(0,"button",27),s._uU(1,"Discard all Changes"),s.qZA())}let J=(()=>{class t{constructor(t,e,n,o,r){this.route=t,this.router=e,this.snack=n,this.asset=o,this.activatedRoute=r,this.user=void 0,this.profileForm=new i.cw({username:new i.NI(null,[i.kI.required,i.kI.pattern(/^\w{5,40}$/)]),photo:new i.NI(null,[i.kI.required]),email:new i.NI(null,[i.kI.required,i.kI.email]),password:new i.NI(null,[i.kI.required,i.kI.pattern(/^\S{12,}$/)]),passwordRepeat:new i.NI(null,[i.kI.required,i.kI.pattern(/^\S{12,}$/)]),currentPasswordForChangeEmail:new i.NI(null,[i.kI.required,i.kI.pattern(/^\S{12,}$/)]),currentPasswordForChangePassword:new i.NI(null,[i.kI.required,i.kI.pattern(/^\S{12,}$/)])}),this.usernameOnEdition=!1,this.imageOnEdition=!1,this.photoPreview="",this.emailOnEdition=!1,this.passwordOnEdition=!1}onPickedImage(t){var e;const n=t.target.files[0];this.profileForm.patchValue({photo:n}),null===(e=this.profileForm.get("photo"))||void 0===e||e.updateValueAndValidity({});const o=new FileReader;o.onload=t=>{this.photoPreview=o.result},o.readAsDataURL(n)}ngOnInit(){this.activatedRoute.data.subscribe(t=>{this.user=t.loggedUser,this.photoPreview=this.asset.buildAsset(this.user.photo),this.profileForm.setValue({username:this.user.username,email:this.user.email,photo:this.asset.buildAsset(this.user.photo),password:null,passwordRepeat:null,currentPasswordForChangeEmail:null,currentPasswordForChangePassword:null})})}onLeaveProfile(){this.snack.open("Sure to Leave?\nAll unsaved changes will be lost.","Confirm",{duration:4e3,verticalPosition:"bottom"}).onAction().subscribe(()=>{this.profileForm.reset(),this.router.navigate(["../home"],{relativeTo:this.route})})}onSubmitProfile(){}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(a.gz),s.Y36(a.F0),s.Y36(u.ux),s.Y36(l.z),s.Y36(a.gz))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-profile"]],decls:57,vars:24,consts:[[1,"container"],[3,"formGroup","ngSubmit"],["mat-card-avatar","","alt","profile image avatar",3,"src"],["multi",""],["matTooltip","field on edition",4,"ngIf"],["appearance","standard",4,"ngIf"],["type","button","mat-stroked-button","",3,"click"],["mat-stroked-button","","type","button",3,"click",4,"ngIf"],["type","file",3,"change"],["filePickerRef",""],["alt","profile image","mat-card-lg-image","",1,"profile-preview",3,"src"],["mat-stroked-button","",3,"click"],[4,"ngIf"],[2,"width","max-content"],["type","reset","mat-stroked-button","",4,"ngIf"],["type","submit","mat-stroked-button","",3,"disabled"],["matTooltip","field on edition"],["appearance","standard"],["formControlName","username","matNativeControl","","required",""],["mat-stroked-button","","type","button",3,"click"],["formControlName","email","matNativeControl","","required",""],["matNativeControl","","required","","formControlName","currentPasswordForChangeEmail"],["class","mat-error",4,"ngIf"],[1,"mat-error"],["matNativeControl","","required","","formControlName","currentPasswordForChangePassword"],["matNativeControl","","required","","formControlName","password"],["matNativeControl","","required","","formControlName","passwordRepeat"],["type","reset","mat-stroked-button",""]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"mat-card",1),s.NdJ("ngSubmit",function(){return e.onSubmitProfile()}),s.TgZ(2,"mat-card-header"),s._UZ(3,"img",2),s.TgZ(4,"mat-card-title"),s._uU(5),s.qZA(),s.qZA(),s.TgZ(6,"mat-card-content"),s.TgZ(7,"mat-accordion",3),s.TgZ(8,"mat-expansion-panel"),s.TgZ(9,"mat-expansion-panel-header"),s.YNc(10,h,2,0,"mat-icon",4),s.TgZ(11,"span"),s._uU(12),s.qZA(),s.qZA(),s.TgZ(13,"div"),s.YNc(14,q,6,0,"mat-form-field",5),s.TgZ(15,"button",6),s.NdJ("click",function(){return e.usernameOnEdition=!e.usernameOnEdition}),s._uU(16),s.qZA(),s.qZA(),s.qZA(),s.TgZ(17,"mat-expansion-panel"),s.TgZ(18,"mat-expansion-panel-header"),s.YNc(19,w,2,0,"mat-icon",4),s.TgZ(20,"span"),s._uU(21,"Image:"),s.qZA(),s.qZA(),s.TgZ(22,"div"),s.YNc(23,A,2,0,"button",7),s.TgZ(24,"input",8,9),s.NdJ("change",function(t){return e.onPickedImage(t)}),s.qZA(),s._UZ(26,"img",10),s.TgZ(27,"button",11),s.NdJ("click",function(){return e.imageOnEdition=!e.imageOnEdition}),s._uU(28),s.qZA(),s.qZA(),s.qZA(),s.TgZ(29,"mat-expansion-panel"),s.TgZ(30,"mat-expansion-panel-header"),s.YNc(31,T,2,0,"mat-icon",4),s.TgZ(32,"span"),s._uU(33),s.qZA(),s.qZA(),s.TgZ(34,"div"),s.YNc(35,_,2,0,"span",12),s.YNc(36,b,6,0,"mat-form-field",5),s.YNc(37,N,7,1,"mat-form-field",5),s.TgZ(38,"button",11),s.NdJ("click",function(){return e.emailOnEdition=!e.emailOnEdition}),s._uU(39),s.qZA(),s.qZA(),s.qZA(),s.TgZ(40,"mat-expansion-panel"),s.TgZ(41,"mat-expansion-panel-header"),s.YNc(42,O,2,0,"mat-icon",4),s.TgZ(43,"span"),s._uU(44," ****************** "),s.qZA(),s.qZA(),s.TgZ(45,"div"),s.YNc(46,U,7,1,"mat-form-field",5),s.YNc(47,v,7,1,"mat-form-field",5),s.YNc(48,E,7,1,"mat-form-field",5),s.TgZ(49,"button",11),s.NdJ("click",function(){return e.passwordOnEdition=!e.passwordOnEdition}),s._uU(50),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(51,"mat-card-actions",13),s.YNc(52,P,2,0,"button",14),s.TgZ(53,"button",15),s._uU(54,"Update Profile"),s.qZA(),s.TgZ(55,"button",6),s.NdJ("click",function(){return e.onLeaveProfile()}),s._uU(56,"Go Back"),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.xp6(1),s.Q6J("formGroup",e.profileForm),s.xp6(2),s.Q6J("src",null==e.user?null:e.user.photo,s.LSH),s.xp6(2),s.Oqu(null==e.user?null:e.user.username),s.xp6(5),s.Q6J("ngIf",e.usernameOnEdition),s.xp6(2),s.Oqu(e.profileForm.value.username),s.xp6(2),s.Q6J("ngIf",e.usernameOnEdition),s.xp6(2),s.Oqu(e.usernameOnEdition?"Cancel":"Edit"),s.xp6(3),s.Q6J("ngIf",e.imageOnEdition),s.xp6(4),s.Q6J("ngIf",e.imageOnEdition),s.xp6(3),s.Q6J("src",e.photoPreview,s.LSH),s.xp6(2),s.Oqu(e.imageOnEdition?"Cancel":"Edit"),s.xp6(3),s.Q6J("ngIf",e.emailOnEdition),s.xp6(2),s.Oqu(e.profileForm.value.email),s.xp6(2),s.Q6J("ngIf",e.emailOnEdition),s.xp6(1),s.Q6J("ngIf",e.emailOnEdition),s.xp6(1),s.Q6J("ngIf",e.emailOnEdition),s.xp6(2),s.Oqu(e.emailOnEdition?"Cancel":"Edit"),s.xp6(3),s.Q6J("ngIf",e.passwordOnEdition),s.xp6(4),s.Q6J("ngIf",e.passwordOnEdition),s.xp6(1),s.Q6J("ngIf",e.passwordOnEdition),s.xp6(1),s.Q6J("ngIf",e.passwordOnEdition),s.xp6(2),s.Oqu(e.passwordOnEdition?"Cancel":"Edit"),s.xp6(2),s.Q6J("ngIf",e.profileForm.touched),s.xp6(1),s.Q6J("disabled",!e.profileForm.valid))},directives:[d.a8,i.JL,i.sg,d.dk,d.kc,d.n5,d.dn,c.pp,c.ib,c.yz,r.O5,m.lW,d.WU,d.hq,p.Hw,g.gM,f.KE,f.hX,i.Fj,Z.Nt,i.JJ,i.u,i.Q7,f.TO,f.bx],styles:[".container[_ngcontent-%COMP%]{margin:10px auto auto;width:-webkit-min-content;width:min-content}input[type=file][_ngcontent-%COMP%]{visibility:hidden}.profile-preview[_ngcontent-%COMP%]{display:block;width:auto}div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block}mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-flex}mat-card-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;border-radius:20px}mat-expansion-panel-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:10px}"]}),t})();var F=n(6201),y=n(6634);const Q=[{path:"",component:J,resolve:{loggedUser:F.T,currentActiveRoom:y.e}}];let Y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[r.ez,a.Bz.forChild(Q)],a.Bz]}),t})(),M=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[o.m,Y]]}),t})()}}]);